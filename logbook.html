<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Logbook | Alif Edu</title>
 <style>
    body {
      background-color: #0a1f44; /* Navy Blue */
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
    }
    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    .card {
      background-color: #fff;
      border-radius: 20px;
      box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.5);
      padding: 40px 30px; /* Increased padding */
      width: 100%;
      max-width: 600px;
    }
    h1 {
      text-align: center;
      color: #0a1f44;
      margin-bottom: 20px;
      text-shadow: 1px 1px 3px gray;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
      font-size: 14px;
      color: #333;
    }
    input, select, textarea {
      width: 100%;
      padding: 12px 14px; /* Increased inner padding */
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 14px;
      box-sizing: border-box; /* Very important to fix width overflow */
    }
    textarea {
      resize: vertical;
    }
    .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    button {
      background-color: #ffcc00; /* Golden Yellow */
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #e6b800;
    }
    footer {
      text-align: center;
      margin-top: 30px;
      color: white;
      font-size: 14px;
    }
</style>

</head>
<body>

<div class="container">
  <div class="card">
    <h1>Log Book</h1>
    <form id="logbookForm">

      <label for="date">Date</label>
      <input type="date" id="date" name="date" required>

      <label for="teacher_name">Teacherâ€™s Name</label>
      <input type="text" id="teacher_name" name="teacher_name" required>

      <label for="staff_id">Staff ID</label>
      <input type="text" id="staff_id" name="staff_id" required>

      <label for="program">Program</label>
      <input type="text" id="program" name="program" required>

      <label for="class">Class</label>
      <select id="class" name="class" required>
        <option value="">Select Class</option>
        <option value="KG">KG</option>
        <option value="Class 1">Class 1</option>
        <option value="Class 2">Class 2</option>
        <option value="Class 3">Class 3</option>
        <!-- Add more classes -->
      </select>

      <label for="student_name">Student Name</label>
      <input type="text" id="student_name" name="student_name">

      <label for="subject">Subject</label>
      <select id="subject" name="subject" required>
        <option value="">Select Subject</option>
        <option value="Maths">Maths</option>
        <option value="Science">Science</option>
        <option value="English">English</option>
        <!-- Add more subjects -->
      </select>

      <label for="class_in">Class In (Time)</label>
      <input type="time" id="class_in" name="class_in" required>

      <label for="class_duration">Class Duration</label>
      <select id="class_duration" name="class_duration" required>
        <option value="">Select Duration</option>
        <option value="60 min">60 min</option>
        <option value="60 + 15 min">60 + 15 min</option>
        <option value="60 + 30 min">60 + 30 min</option>
        <option value="60 + 45 min">60 + 45 min</option>
        <option value="60 + 60 min">60 + 60 min</option>
      </select>

      <label for="taught_today">What did you teach today?</label>
      <textarea id="taught_today" name="taught_today" rows="3"></textarea>

      <label for="student_engagement">Student Engagement</label>
      <textarea id="student_engagement" name="student_engagement" rows="3"></textarea>

      <label for="homework_given">Homework or Tasks Given?</label>
      <textarea id="homework_given" name="homework_given" rows="2"></textarea>

      <label for="work_type">What type of Work</label>
      <select id="work_type" name="work_type">
        <option value="">Select Type</option>
        <option value="Assignment">Assignment</option>
        <option value="Project">Project</option>
        <option value="Worksheet">Worksheet</option>
        <option value="Class Test">Class Test</option>
      </select>

      <label for="upload_work">Upload Class Notification Message</label>
      <textarea id="upload_work" name="upload_work" rows="2"></textarea>

      <label for="share_moments">Anything you'd like to share?</label>
      <textarea id="share_moments" name="share_moments" rows="3"></textarea>

      <div class="button-group">
        <button type="submit">Submit</button>
        <button type="button" onclick="window.location.href='dashboard.html'">Dashboard</button>
      </div>
    </form>
  </div>
</div>

<footer>
  Powered by Alif Edu
</footer>

   <script>
    // The JavaScript function to handle the form submission
   document.getElementById('logbookForm').addEventListener('submit', function (e) {
  e.preventDefault();  // Prevent the default form submission behavior

  const uploadWorkElement = document.getElementById('upload_work');
  
  // Ensure the element exists and that it has files selected
  const uploadWorkFileName = uploadWorkElement && uploadWorkElement.files && uploadWorkElement.files.length > 0 
    ? uploadWorkElement.files[0].name 
    : '';

  const formData = {
    date: document.getElementById('date').value,
    teacher_name: document.getElementById('teacher_name').value,
    staff_id: document.getElementById('staff_id').value,
    program: document.getElementById('program').value,
    class: document.getElementById('class').value,
    student_name: document.getElementById('student_name').value,
    subject: document.getElementById('subject').value,
    class_in: document.getElementById('class_in').value,
    class_duration: document.getElementById('class_duration').value,
    taught_today: document.getElementById('taught_today').value,
    student_engagement: document.getElementById('student_engagement').value,
    homework_given: document.getElementById('homework_given').value,
    work_type: document.getElementById('work_type').value,
    upload_work: uploadWorkFileName, // Use the safe file name
    share_moments: document.getElementById('share_moments').value
  };

  //hi Send the data to Google Apps Script
 fetch('https://script.google.com/macros/s/AKfycbxcw7miU9-2Tw7CYbnvgjx10gVHSjdPs00nOrHhalOzhuZgQWm7BT4PggtL6deiZ0_Exg/exec', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(formData)
})
.then(response => {
  if (!response.ok) {
    throw new Error(`HTTP error! Status: ${response.status}`);
  }
  return response.json();
})
.then(data => {
  if (data.result === 'success') {
    alert('Logbook submitted successfully!');
  } else {
    alert('Error: ' + data.message);
  }
})
.catch(error => {
  console.error('Error occurred:', error);  // More detailed error logs
  alert('Fetch error: ' + error.message);  // Show the error message
});

  </script>
</body>
</html>
